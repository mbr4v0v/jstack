var JSTACK=JSTACK||{};JSTACK.VERSION="0.1";JSTACK.AUTHORS="GING";JSTACK.Comm=function(d,c){var f;f=function(d,f,a,b,e,g,j){var k,n,g=g||function(){},e=e||function(){};k=new XMLHttpRequest;k.open(d,f,!0);a&&k.setRequestHeader("Content-Type","application/json");k.setRequestHeader("Accept","application/json");b!==c&&k.setRequestHeader("X-Auth-Token",b);if(j)for(var m in j)k.setRequestHeader(m,j[m]);k.onerror=function(a){g({message:"Error",body:a})};k.onreadystatechange=function(){if(!l&&4===k.readyState)switch(l=!0,k.status){case 100:case 200:case 201:case 202:case 203:case 204:case 205:case 206:case 207:n=
c;k.responseText!==c&&""!==k.responseText&&(n=JSON.parse(k.responseText));e(n,k.getAllResponseHeaders());break;default:g({message:k.status+" Error",body:k.responseText})}};var l=!1;if(a!==c){d=JSON.stringify(a);try{k.send(d)}catch(o){}}else try{k.send()}catch(p){}};return{get:function(d,h,a,b){f("get",d,c,h,a,b)},head:function(d,h,a,b){f("head",d,c,h,a,b)},post:function(c,d,a,b,e){f("POST",c,d,a,b,e)},put:function(c,d,a,b,e){f("PUT",c,d,a,b,e)},del:function(d,h,a,b){f("DELETE",d,c,h,a,b)}}}(JSTACK);JSTACK.Utils=function(d){var c,f;c=function(c){var d="",a,b,c=c.replace(/\r\n/g,"\n");for(a=0;a<c.length;a+=1)b=c.charCodeAt(a),128>b?d+=String.fromCharCode(b):(127<b&&2048>b?d+=String.fromCharCode(b>>6|192):(d+=String.fromCharCode(b>>12|224),d+=String.fromCharCode(b>>6&63|128)),d+=String.fromCharCode(b&63|128));return d};f=function(c){for(var d="",a=0,b=0,e=0,g=0;a<c.length;)b=c.charCodeAt(a),128>b?(d+=String.fromCharCode(b),a+=1):191<b&&224>b?(e=c.charCodeAt(a+1),d+=String.fromCharCode((b&31)<<
6|e&63),a+=2):(e=c.charCodeAt(a+1),g=c.charCodeAt(a+2),d+=String.fromCharCode((b&15)<<12|(e&63)<<6|g&63),a+=3);return d};return{encode:function(d){for(var f="",a,b,e,g,j,k,n=0,d=c(d);n<d.length;)a=d.charCodeAt(n+=1),b=d.charCodeAt(n+=1),e=d.charCodeAt(n+=1),g=a>>2,a=(a&3)<<4|b>>4,j=(b&15)<<2|e>>6,k=e&63,isNaN(b)?j=k=64:isNaN(e)&&(k=64),f=f+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(j)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k);return f},decode:function(c){for(var h="",a,b,e,g,j,k=0,c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<c.length;)a=d.Utils.keyStr.indexOf(c.charAt(k+=1)),b=d.Utils.keyStr.indexOf(c.charAt(k+=1)),g=d.Utils.keyStr.indexOf(c.charAt(k+=1)),j=d.Utils.keyStr.indexOf(c.charAt(k+=1)),a=a<<2|b>>4,b=(b&15)<<4|g>>2,e=(g&3)<<6|j,h+=String.fromCharCode(a),64!==g&&(h+=String.fromCharCode(b)),64!==j&&(h+=String.fromCharCode(e));return h=f(h)}}}(JSTACK);JSTACK.Keystone=function(d,c){var f,i;i={DISCONNECTED:0,AUTHENTICATING:1,AUTHENTICATED:2,AUTHENTICATION_ERROR:3};f={url:c,currentstate:c,access:c,token:c};return{STATES:i,params:f,init:function(d,a){console.log("Admin URL"+a);f.url=d;f.adminUrl=a;f.access=c;f.token=c;f.currentstate=i.DISCONNECTED},authenticate:function(h,a,b,e,g,j){var k={},k=b!==c?{auth:{token:{id:b}}}:{auth:{passwordCredentials:{username:h,password:a}}};e!==c&&(k.auth.tenantId=e);f.currentstate=i.AUTHENTICATING;d.Comm.post(f.url+
"tokens",k,c,function(a){f.currentstate=d.Keystone.STATES.AUTHENTICATED;f.access=a.access;f.token=f.access.token.id;g!==c&&g(a)},function(a){f.currentstate=i.AUTHENTICATION_ERROR;j(a)})},gettenants:function(h,a,b){if(f.currentstate===d.Keystone.STATES.AUTHENTICATED){var e=f.url;a&&(e=f.adminUrl);d.Comm.get(e+"tenants",f.token,function(a){h!==c&&h(a)},function(a){b!==c&&b(a)})}},getservice:function(d){var a,b;if(f.currentstate!==i.AUTHENTICATED)return c;for(a in f.access.serviceCatalog)if(f.access.serviceCatalog[a]!==
c&&(b=f.access.serviceCatalog[a],d===b.type))return b;return c},getservicelist:function(){return f.currentstate!==i.AUTHENTICATED?c:f.access.serviceCatalog},createuser:function(c,a,b,e,g,j,k){f.currentstate===d.Keystone.STATES.AUTHENTICATED&&d.Comm.post(f.adminUrl+"users",{user:{name:c,password:a,tenantId:b,email:e,enabled:g}},f.token,j,k)},edituser:function(h,a,b,e,g,j,k,i){f.currentstate===d.Keystone.STATES.AUTHENTICATED&&(a={user:{name:a,tenantId:e,email:g,enabled:j}},b!==c&&(a.user.password=b),
d.Comm.put(f.adminUrl+"users/"+h,a,f.token,k,i))},getusers:function(c,a){f.currentstate===d.Keystone.STATES.AUTHENTICATED&&d.Comm.get(f.adminUrl+"users",f.token,c,a)},getusersfortenant:function(c,a,b){f.currentstate===d.Keystone.STATES.AUTHENTICATED&&d.Comm.get(f.adminUrl+"tenants/"+c+"/users",f.token,a,b)},getuser:function(c,a,b){f.currentstate===d.Keystone.STATES.AUTHENTICATED&&d.Comm.get(f.adminUrl+"users/"+c,f.token,a,b)},deleteuser:function(c,a,b){f.currentstate===d.Keystone.STATES.AUTHENTICATED&&
d.Comm.del(f.adminUrl+"users/"+c,f.token,a,b)},getuserroles:function(h,a,b,e){if(f.currentstate===d.Keystone.STATES.AUTHENTICATED){var g="",g=a!==c?f.adminUrl+"tenants/"+a+"/users/"+h+"/roles":f.adminUrl+"users/"+h+"/roles";d.Comm.get(g,f.token,b,e)}},getroles:function(c,a){f.currentstate===d.Keystone.STATES.AUTHENTICATED&&d.Comm.get(f.adminUrl+"OS-KSADM/roles",f.token,c,a)},adduserrole:function(h,a,b,e,g){if(f.currentstate===d.Keystone.STATES.AUTHENTICATED){var j="",j=b!==c?f.adminUrl+"tenants/"+
b+"/users/"+h+"/roles/OS-KSADM/"+a:f.adminUrl+"users/"+h+"/roles/OS-KSADM/"+a;d.Comm.put(j,{},f.token,e,g)}},removeuserrole:function(h,a,b,e,g){if(f.currentstate===d.Keystone.STATES.AUTHENTICATED){var j="",j=b!==c?f.adminUrl+"tenants/"+b+"/users/"+h+"/roles/OS-KSADM/"+a:f.adminUrl+"users/"+h+"/roles/OS-KSADM/"+a;d.Comm.del(j,f.token,e,g)}},createtenant:function(c,a,b,e,g){f.currentstate===d.Keystone.STATES.AUTHENTICATED&&d.Comm.post(f.adminUrl+"tenants",{tenant:{name:c,description:a,enabled:b}},f.token,
e,g)},edittenant:function(c,a,b,e,g,j){f.currentstate===d.Keystone.STATES.AUTHENTICATED&&d.Comm.put(f.adminUrl+"tenants/"+c,{tenant:{id:c,name:a,description:b,enabled:e}},f.token,g,j)},deletetenant:function(c,a,b){f.currentstate===d.Keystone.STATES.AUTHENTICATED&&d.Comm.del(f.adminUrl+"tenants/"+c,f.token,a,b)}}}(JSTACK);JSTACK.Nova=function(d,c){var f,i,h;f={url:c,state:c,endpointType:"publicURL",service:"compute"};i=function(){if(d.Keystone!==c&&d.Keystone.params.currentstate===d.Keystone.STATES.AUTHENTICATED){var a=d.Keystone.getservice(f.service);f.url=a.endpoints[0][f.endpointType];return!0}return!1};h=function(a,b,e,g){i()&&(a=f.url+"/servers/"+a+"/action",d.Comm.post(a,b,d.Keystone.params.token,function(a){e!==c&&e(a)},function(a){g!==c&&g(a)}))};return{configure:function(a){if("adminURL"===a||"internalURL"===
a||"publicURL"===a)f.endpointType=a},params:f,getserverlist:function(a,b,e,g){var j;i()&&(j=f.url+"/servers",a!==c&&a&&(j+="/detail"),b&&(j+="?all_tenants="+b),d.Comm.get(j,d.Keystone.params.token,function(a){e!==c&&e(a)},function(a){g!==c&&g(a)}))},getserverdetail:function(a,b,e){i()&&(a=f.url+"/servers/"+a,d.Comm.get(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},getserverips:function(a,b,e,g){i()&&(a=f.url+"/servers/"+a+"/ips",b!==c&&(a+="/"+b),d.Comm.get(a,d.Keystone.params.token,
function(a){e!==c&&e(a)},function(a){g!==c&&g(a)}))},updateserver:function(a,b,e,g){i()&&(a=f.url+"/servers/"+a,b!==c&&d.Comm.put(a,{server:{name:b}},d.Keystone.params.token,function(a){e!==c&&e(a)},function(a){g!==c&&g(a)}))},createserver:function(a,b,e,g,j,k,h,m,l,o,p){var r=[],q;if(i()){a={server:{name:a,imageRef:b,flavorRef:e}};g!==c&&(a.server.key_name=g);j!==c&&(a.server.user_data=d.Utils.encode(j));if(k!==c){for(q in k)k[q]!==c&&(g={name:k[q]},r.push(g));a.server.security_groups=r}h===c&&(h=
1);a.server.min_count=h;m===c&&(m=1);a.server.max_count=m;l!==c&&(a.server.availability_zone=d.Utils.encode(l));d.Comm.post(f.url+"/servers",a,d.Keystone.params.token,function(a){o!==c&&o(a)},function(a){p!==c&&p(a)})}},deleteserver:function(a,b,e){i()&&(a=f.url+"/servers/"+a,d.Comm.del(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},changepasswordserver:function(a,b,e,g){b!==c&&h(a,{changePassword:{adminPass:b}},e,g)},rebootserverhard:function(a,b,c){h(a,{reboot:{type:"HARD"}},
b,c)},rebootserversoft:function(a,b,c){h(a,{reboot:{type:"SOFT"}},b,c)},resizeserver:function(a,b,c,g){h(a,{resize:{flavorRef:b}},c,g)},confirmresizedserver:function(a,b,c){h(a,{confirmResize:null},b,c)},revertresizedserver:function(a,b,c){h(a,{revertResize:null},b,c)},startserver:function(a,b,c){h(a,{"os-start":null},b,c)},stopserver:function(a,b,c){h(a,{"os-stop":null},b,c)},pauseserver:function(a,b,c){h(a,{pause:null},b,c)},unpauseserver:function(a,b,c){h(a,{unpause:null},b,c)},suspendserver:function(a,
b,c){h(a,{suspend:null},b,c)},resumeserver:function(a,b,c){h(a,{resume:null},b,c)},createimage:function(a,b,d,g,f){b={createImage:{name:b}};b.createImage.metadata={};d!==c&&(b.createImage.metadata=d);h(a,b,g,f)},getflavorlist:function(a,b,e){var g;i()&&(g=f.url+"/flavors",a!==c&&a&&(g+="/detail"),d.Comm.get(g,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},getflavordetail:function(a,b,e){i()&&(a=f.url+"/flavors/"+a,d.Comm.get(a,d.Keystone.params.token,function(a){b!==
c&&b(a)},function(a){e!==c&&e(a)}))},createflavor:function(a,b,e,g,j,k,h,m,l,o){var p;i()&&(p=f.url+"/flavors",a={flavor:{name:a,ram:b,vcpus:e,disk:g,id:j+"",swap:0,"OS-FLV-EXT-DATA:ephemeral":0,rxtx_factor:0}},k!==c&&(a.flavor["OS-FLV-EXT-DATA:ephemeral"]=k),h!==c&&(a.flavor.swap=h),m!==c&&(a.flavor.rxtx_factor=m),d.Comm.post(p,a,d.Keystone.params.token,function(a){l!==c&&l(a)},function(a){o!==c&&o(a)}))},deleteflavor:function(a,b,e){i()&&(a=f.url+"/flavors/"+a,d.Comm.del(a,d.Keystone.params.token,
function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},getimagelist:function(a,b,e){var g;i()&&(g=f.url+"/images",a!==c&&a&&(g+="/detail"),d.Comm.get(g,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},getimagedetail:function(a,b,e){i()&&(a=f.url+"/images/"+a,d.Comm.get(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},deleteimage:function(a,b,e){i()&&(a=f.url+"/images/"+a,d.Comm.del(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==
c&&e(a)}))},getkeypairlist:function(a,b){var e;i()&&(e=f.url+"/os-keypairs",d.Comm.get(e,d.Keystone.params.token,function(b){a!==c&&a(b)},function(a){b!==c&&b(a)}))},createkeypair:function(a,b,e,g){var j;i()&&(j=f.url+"/os-keypairs",a={keypair:{name:a}},b!==c&&(a.keypair.public_key=b),d.Comm.post(j,a,d.Keystone.params.token,function(a){e!==c&&e(a)},function(a){g!==c&&g(a)}))},deletekeypair:function(a,b,e){i()&&(a=f.url+"/os-keypairs/"+a,d.Comm.del(a,d.Keystone.params.token,function(a){b!==c&&b(a)},
function(a){e!==c&&e(a)}))},getkeypairdetail:function(a,b,e){i()&&(a=f.url+"/os-keypairs/"+a,d.Comm.get(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},getvncconsole:function(a,b,d,g){if(i()){if(b===c||!b)b="novnc";h(a,{"os-getVNCConsole":{type:b}},d,g)}},getconsoleoutput:function(a,b,d,g){if(i()){if(b===c||!b)b=35;h(a,{"os-getConsoleOutput":{length:b}},d,g)}},getattachedvolumes:function(a,b,e){i()&&(a=f.url+"/servers/"+a+"/os-volume_attachments",d.Comm.get(a,d.Keystone.params.token,
function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},attachvolume:function(a,b,e,g,j){i()&&(a=f.url+"/servers/"+a+"/os-volume_attachments",b===c||e===c||d.Comm.post(a,{volumeAttachment:{volumeId:b,device:e}},d.Keystone.params.token,function(a){g!==c&&g(a)},function(a){j!==c&&j(a)}))},detachvolume:function(a,b,e,g){i()&&(a=f.url+"/servers/"+a+"/os-volume_attachments/"+b,b!==c&&d.Comm.del(a,d.Keystone.params.token,function(a){e!==c&&e(a)},function(a){g!==c&&g(a)}))},getattachedvolume:function(a,b,e,
g){i()&&(a=f.url+"/servers/"+a+"/os-volume_attachments/"+b,b!==c&&d.Comm.get(a,d.Keystone.params.token,function(a){e!==c&&e(a)},function(a){g!==c&&g(a)}))},getquotalist:function(a,b,e){i()&&(a=f.url+"/os-quota-sets/"+a,d.Comm.get(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},updatequota:function(a,b,e,g,j,k,h,m,l,o,p,r,q,t,u,v){var w;if(i()&&(w=f.url+"/os-quota-sets/"+a,!(b==c&&e==c&&g==c&&j==c&&k==c&&h==c&&m==c&&l==c&&o==c&&p==c&&r==c&&q==c&&t==c))){var a={quota_set:{instances:b,
cores:e,ram:g,volumes:j,gigabytes:k,floating_ips:h,metadata_items:m,injected_files:l,injected_file_content_bytes:o,injected_file_path_bytes:p,security_groups:r,security_group_rules:q,key_pairs:t,id:a}},s;for(s in a.quota_set)a.quota_set[s]==c&&delete a.quota_set[s];d.Comm.put(w,a,d.Keystone.params.token,function(a){u!==c&&u(a)},function(a){v!==c&&v(a)})}},getdefaultquotalist:function(a,b,e){i()&&(a=f.url+"/os-quota-sets/"+a+"/defaults",d.Comm.get(a,d.Keystone.params.token,function(a){b!==c&&b(a)},
function(a){e!==c&&e(a)}))},getsecuritygrouplist:function(a,b){var e;i()&&(e=f.url+"/os-security-groups",d.Comm.get(e,d.Keystone.params.token,function(b){a!==c&&a(b)},function(a){b!==c&&b(a)}))},createsecuritygroup:function(a,b,e,g){var j;i()&&(j=f.url+"/os-security-groups",a={security_group:{name:a,description:b}},d.Comm.post(j,a,d.Keystone.params.token,function(a){console.log(e);e!==c&&e(a)},function(a){g!==c&&g(a)}))},getsecuritygroupdetail:function(a,b,e){i()&&(a=f.url+"/os-security-groups/"+
a,d.Comm.get(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},deletesecuritygroup:function(a,b,e){i()&&(a=f.url+"/os-security-groups/"+a,d.Comm.del(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},createsecuritygrouprule:function(a,b,e,g,j,h,n,m){var l;i()&&(l=f.url+"/os-security-group-rules",a={security_group_rule:{ip_protocol:a,from_port:b,to_port:e,cidr:g,group_id:j,parent_group_id:h}},d.Comm.post(l,a,d.Keystone.params.token,function(a){n!==
c&&n(a)},function(a){m!==c&&m(a)}))},deletesecuritygrouprule:function(a,b,e){i()&&(a=f.url+"/os-security-group-rules/"+a,d.Comm.del(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},getsecuritygroupforserver:function(a,b,e){i()&&(a=f.url+"/servers/"+a+"/os-security-groups",d.Comm.get(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},getfloatingIPpools:function(a,b){var e;i()&&(e=f.url+"/os-floating-ip-pools",d.Comm.get(e,d.Keystone.params.token,
function(b){a!==c&&a(b)},function(a){b(a);throw Error(a);}))},getfloatingIPs:function(a,b){var e;i()&&(e=f.url+"/os-floating-ips",d.Comm.get(e,d.Keystone.params.token,function(b){a!==c&&a(b)},function(a){b(a);throw Error(a);}))},getfloatingIPdetail:function(a,b,e){i()&&(a=f.url+"/os-floating-ips/"+a,d.Comm.get(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e(a);throw Error(a);}))},allocatefloatingIP:function(a,b,e){var g,j;i()&&(g=f.url+"/os-floating-ips",a!==c&&(j={pool:a}),d.Comm.post(g,
j,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e(a);throw Error(a);}))},associatefloatingIP:function(a,b,e,g){i()&&(a=f.url+"/servers/"+a+"/action",d.Comm.post(a,{addFloatingIp:{address:b}},d.Keystone.params.token,function(a){e!==c&&e(a)},function(a){g(a);throw Error(a);}))},disassociatefloatingIP:function(a,b,e,g){i()&&(a=f.url+"/servers/"+a+"/action",d.Comm.post(a,{removeFloatingIp:{address:b}},d.Keystone.params.token,function(a){e!==c&&e(a)},function(a){g(a);throw Error(a);}))},
releasefloatingIP:function(a,b,e){i()&&(a=f.url+"/os-floating-ips/"+a,d.Comm.del(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e(a);throw Error(a);}))}}}(JSTACK);JSTACK.Cinder=function(d,c){var f,i,h;f=c;i="publicURL";h=function(){return d.Keystone!==c&&d.Keystone.params.currentstate===d.Keystone.STATES.AUTHENTICATED?(f=d.Keystone.getservice("volume").endpoints[0][i],!0):!1};return{configure:function(a){if("adminURL"===a||"internalURL"===a||"publicURL"===a)i=a},getvolumelist:function(a,b,e){var g;h()&&(g=f+"/volumes",a!==c&&a&&(g+="/detail"),d.Comm.get(g,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},createvolume:function(a,b,
e,g,j){h()&&(a={volume:{size:a}},b!==c&&(a.volume.display_name=b),e!==c&&(a.volume.display_description=e),d.Comm.post(f+"/volumes",a,d.Keystone.params.token,function(a){g!==c&&g(a)},function(a){j!==c&&j(a)}))},deletevolume:function(a,b,e){h()&&(a=f+"/volumes/"+a,d.Comm.del(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},getvolume:function(a,b,e){h()&&(a=f+"/volumes/"+a,d.Comm.get(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},getsnapshotlist:function(a,
b,e){var g;h()&&(g=f+"/snapshots",a!==c&&a&&(g+="/detail"),d.Comm.get(g,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},createsnapshot:function(a,b,e,g,j){h()&&(a={snapshot:{volume_id:a,force:!0}},b!==c&&(a.snapshot.display_name=b),e!==c&&(a.snapshot.display_description=e),d.Comm.post(f+"/snapshots",a,d.Keystone.params.token,function(a){g!==c&&g(a)},function(a){j!==c&&j(a)}))},deletesnapshot:function(a,b,e){h()&&(a=f+"/snapshots/"+a,d.Comm.del(a,d.Keystone.params.token,
function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},getsnapshot:function(a,b,e){h()&&(a=f+"/snapshots/"+a,d.Comm.get(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))}}}(JSTACK);JSTACK.Glance=function(d,c){var f,i,h;f=c;i="publicURL";h=function(){return d.Keystone!==c&&d.Keystone.params.currentstate===d.Keystone.STATES.AUTHENTICATED?(f=d.Keystone.getservice("image").endpoints[0][i],!0):!1};return{configure:function(a){if("adminURL"===a||"internalURL"===a||"publicURL"===a)i=a},getimagelist:function(a,b,e){var g;h()&&(g=f+"/images",a!==c&&a&&(g+="/detail"),d.Comm.get(g,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},getimagedetail:function(a,b,
e){h()&&(a=f+"/images/"+a,d.Comm.get(a,d.Keystone.params.token,function(a){b!==c&&b(a)},function(a){e!==c&&e(a)}))},updateimage:function(a,b,e,g,j,i,n,m){var l={};if(h()){a=f+"/images/"+a;b&&(l["x-image-meta-name"]=b);e&&(l["x-image-meta-is_public"]=e);g&&(l["x-image-meta-min_ram"]=g);j&&(l["x-image-meta-min_disk"]=j);for(var o in i)l["x-image-meta-property-"+o]=i[o];d.Comm.put(a,c,d.Keystone.params.token,function(a){n!==c&&n(a)},function(a){m!==c&&m(a)},l)}}}}(JSTACK);
